WarcBase
========

A web archive browser built on HBase.

Getting Started
---------------

Once you check out the repo, build WarcBase:

```
mvn clean package appassembler:assemble
```

Ingesting WARC files:

```
$ setenv CLASSPATH_PREFIX "/etc/hbase/conf/"
$ sh target/appassembler/bin/IngestWarcFiles -dir /path/to/warc/ -name archive_name -create
```

Two main class implementing Lucene FST: 
+ UriMappingBuilder, takes a list of URLs as input and build FST mapping and stores on outputFile. 
+ UriMapping, load the mapping file generated by Builder and provide API for accessing FST. This class have two main methods:
1. String getUri(int id): takes an id and returns the complete Uri
2. int getId(String uri): takes a URI and returns its id

To Build Lucene FST :

```
$ sh target/appassembler/bin/UriMappingBuilder inputDirectory outputFile
```

This command will read all files under inputDirectory as input, build FST mapping and store in outputFile. 

Command-line options:

+ Use the `-dir` option to specify directory containing WARC files.
+ Use the `-name` option to specify the name of the archive (will correspond to the HBase table name).
+ Use the `-create` option to create a new table (and drop the existing table if a table with the same name exists already). Alternatively, use `-append` to add to an existing table.

Starting the browser:

```
$ setenv CLASSPATH_PREFIX "/etc/hbase/conf/"
$ sh target/appassembler/bin/WarcBrowser -port 9191 -server http://myhost:9191/
```

Navigate to `http://myhost:9191/` to browse the archive.
